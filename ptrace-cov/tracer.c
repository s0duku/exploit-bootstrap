
#include "headers/tracer.h"
#include <sys/ptrace.h>
#include <sys/wait.h>
#include <sys/user.h>



int tracer_attach(pid_t pid) {
    int ret;
    ret = ptrace(PTRACE_ATTACH, pid, NULL, NULL);
    if (ret < 0) {
        puts("ptrace attach");
    }
    return ret;
}


int tracer_detach(pid_t pid) {
    int ret;
    ret = ptrace(PTRACE_DETACH, pid, NULL, NULL);
    if (ret < 0) {
        puts("ptrace detach");
    }
    return ret;
}

int tracer_step(pid_t pid,int *child_status){
    int res = ptrace(PTRACE_SINGLESTEP, pid, NULL, NULL);
    if(res >= 0){
        wait(child_status);
    }
    return res;
}

